!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=React},function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=wp.data.registerStore,o={addChannel:function(e){return{type:"ADD_CHANNEL",channelId:e}},removeChannel:function(e){return{type:"REMOVE_CHANNEL",channelId:e}}};a("kunta-api/service-location-service-channel",{reducer:function(e,t){switch(void 0===e&&(e={channelIds:[]}),t.type){case"ADD_CHANNEL":return n({},e,{channelIds:(e.channelIds||[]).concat(t.channelId)});case"REMOVE_CHANNEL":return n({},e,{channelIds:(e.channelIds||[]).filter(function(e){return e!==t.channelId})})}return e},actions:o,selectors:{isChannelPage:function(e,t){return(e.channelIds||[]).indexOf(t)>-1}},resolvers:{isChannelPage:function(e){return wp.data.select("core/editor").getBlocks().filter(function(t){var n=t.attributes;return"kunta-api/service-location-service-channel"===t.name&&n&&n.channelId==e&&n.serviceLocationPage}).length>0?o.addChannel(e):o.removeChannel(e)}}})},function(e,t,n){"use strict";n.r(t);n(1);var a,o=n(0),r=n.n(o),i=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=(wp.i18n.__,function(e){function t(t){var n=e.call(this,t)||this;return n.onInputChange=function(e){var t=wp.apiFetch,a=e.currentTarget.value;if(!(n.state.searching||a.length<3)){var o=new URLSearchParams;o.append("action",n.props.searchAction),o.append("data",a),n.setState({searching:!0}),t({url:ajaxurl,method:"POST",body:o}).then(function(e){n.setState({searching:!1,entities:e})})}},n.state={entities:[],searching:!1,hoverIndex:-1},n}return i(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",{style:this.props.style},r.a.createElement(wp.components.BaseControl,{style:{width:"100%"},id:"search",label:this.props.inputLabel,help:this.props.inputHelp},r.a.createElement("input",{id:"search",style:{width:"100%"},onChange:this.onInputChange})),r.a.createElement("div",{style:{height:"300px",overflowY:"auto"}},this.state.searching?r.a.createElement(wp.components.Placeholder,{style:{height:"300px"}},r.a.createElement(wp.components.Spinner,null)):this.state.entities.map(function(t,n){return r.a.createElement("div",{onMouseOver:function(){return e.setState({hoverIndex:n})},onClick:function(){return e.props.onSelect(t)},style:{fontWeight:e.state.hoverIndex==n?"bold":"normal",cursor:"pointer",paddingTop:"5px",paddingBottom:"5px"},key:t.id},e.props.getDisplayName(t))})))},t}(r.a.Component)),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=(wp.i18n.__,function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.onSelect=function(e){this.props.onSelect(e)},t.prototype.render=function(){var e=this;return this.props.open?r.a.createElement(wp.components.Modal,{style:{minWidth:"60%"},title:this.props.modalTitle,onRequestClose:function(){return e.props.onClose()}},r.a.createElement(c,{inputLabel:this.props.inputLabel,inputHelp:this.props.inputHelp,getDisplayName:this.props.getDisplayName,searchAction:this.props.searchAction,onSelect:function(t){return e.onSelect(t)},style:{width:"100%"}})):null},t}(r.a.Component)),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=wp.i18n.__,h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isOpen:!1,component:n.props.component,lang:n.props.lang,serviceId:n.props.serviceId},n}return l(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.component!==t.component&&this.props.onComponentChange(this.state.component),this.state.lang!==t.lang&&this.props.onLangChange(this.state.lang),this.state.serviceId!==t.serviceId&&this.props.onServiceIdChange(this.state.serviceId)},t.prototype.render=function(){var e=this,t=wp.components.Button,n=["description","userInstruction","languages","electronicServiceChannelIds","phoneServiceChannelIds","printableFormServiceChannelIds","serviceLocationServiceChannelIds","webPageServiceChannelIds"].map(function(e){return{label:u("servicecomponent."+e,"kunta_api_core"),value:e}}),a=["fi","sv","en"].map(function(e){return{label:u("language."+e,"kunta_api_core"),value:e}});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},r.a.createElement(t,{className:"button",isDefault:!0,onClick:function(){return e.setState({isOpen:!0})}},u("Change service","kunta_api_core"))),r.a.createElement("div",{style:{fontSize:"16px"}},r.a.createElement("div",{style:{float:"left",paddingRight:"5px"}},u("Current service:","kunta_api_core")),r.a.createElement(wp.components.ServerSideRender,{block:"kunta-api/service",attributes:{serviceId:this.state.serviceId,lang:this.state.lang,component:this.state.component},urlQueryArgs:{displayName:!0}}))),r.a.createElement(wp.components.SelectControl,{label:u("Component","kunta_api_core"),value:this.state.component,options:n,onChange:function(t){e.setState({component:t})}}),r.a.createElement(wp.components.SelectControl,{label:u("Language","kunta_api_core"),value:this.state.lang,options:a,onChange:function(t){e.setState({lang:t})}}),r.a.createElement(p,{modalTitle:u("Search Services","kunta_api_core"),inputLabel:u("Search Services","kunta_api_core"),inputHelp:u("Enter some text to search services","kunta_api_core"),searchAction:"kunta_api_search_services",open:this.state.isOpen,getDisplayName:function(e){var t=e.names||[];return t.sort(function(e,t){return"fi"===e.language?-1:1}),t.length?t[0].value:null},onSelect:function(t){e.setState({isOpen:!1,serviceId:t.id})},onClose:function(){return e.setState({isOpen:!1})}}),r.a.createElement("hr",null),r.a.createElement(wp.components.ServerSideRender,{block:"kunta-api/service",attributes:{serviceId:this.state.serviceId,lang:this.state.lang,component:this.state.component},urlQueryArgs:{preview:!0}}))},t}(r.a.Component),v=wp.i18n.__;wp.blocks.registerBlockType("kunta-api/service",{title:v("Kunta API Service","kunta_api_core"),icon:r.a.createElement("svg",{"aria-hidden":"true",width:"0.46em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 640 1408"},r.a.createElement("path",{d:"M640 1216v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h64V768H64q-26 0-45-19T0 704V576q0-26 19-45t45-19h384q26 0 45 19t19 45v576h64q26 0 45 19t19 45zM512 64v192q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V64q0-26 19-45t45-19h256q26 0 45 19t19 45z",fill:"#626262"})),category:"layout",attributes:{serviceId:{type:"string"},component:{type:"string"},lang:{type:"string"}},edit:function(e){return r.a.createElement(h,{component:e.attributes.component,lang:e.attributes.lang,serviceId:e.attributes.serviceId,onComponentChange:function(t){e.setAttributes({component:t})},onLangChange:function(t){e.setAttributes({lang:t})},onServiceIdChange:function(t){e.setAttributes({serviceId:t})}})},save:function(){return null}});var d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),f=wp.data.withSelect,m=wp.i18n.__,g=function(e){function t(t){return e.call(this,t)||this}return d(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(wp.components.CheckboxControl,{label:m("Service location page","kunta_api_core"),checked:this.props.isChecked,onChange:function(t){t?wp.data.dispatch("kunta-api/service-location-service-channel").addChannel(e.props.channelId):wp.data.dispatch("kunta-api/service-location-service-channel").removeChannel(e.props.channelId)}})},t}(r.a.Component),_=f(function(e,t){return{isChecked:(0,e("kunta-api/service-location-service-channel").isChannelPage)(t.channelId)}})(g),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),q=wp.i18n.__,b=wp.data.subscribe,C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isOpen:!1,component:n.props.component,lang:n.props.lang,channelId:n.props.channelId,serviceLocationPage:n.props.serviceLocationPage},b(function(){var e=wp.data.select("kunta-api/service-location-service-channel").isChannelPage;n.setState({serviceLocationPage:e(n.state.channelId)})}),n}return y(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.component!==t.component&&this.props.onComponentChange(this.state.component),this.state.lang!==t.lang&&this.props.onLangChange(this.state.lang),this.state.channelId!==t.channelId&&this.props.onChannelIdChange(this.state.channelId),this.state.serviceLocationPage!==t.serviceLocationPage&&this.props.onServiceLocationPageChange(this.state.serviceLocationPage)},t.prototype.render=function(){var e=this,t=wp.components.Button,n=["description","adresses","email","fax","name","phone","phone-charge-info","servicehours","webpages"].map(function(e){return{label:q("servicelocationservicechannel."+e,"kunta_api_core"),value:e}}),a=["fi","sv","en"].map(function(e){return{label:q("language."+e,"kunta_api_core"),value:e}});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},r.a.createElement(t,{className:"button",isDefault:!0,onClick:function(){return e.setState({isOpen:!0})}},q("Change service location","kunta_api_core"))),r.a.createElement("div",{style:{fontSize:"16px"}},r.a.createElement("div",{style:{float:"left",paddingRight:"5px"}},q("Current service location:","kunta_api_core")),r.a.createElement(wp.components.ServerSideRender,{block:"kunta-api/service-location-service-channel",attributes:{channelId:this.state.channelId,lang:this.state.lang,component:this.state.component},urlQueryArgs:{displayName:!0}}))),r.a.createElement(wp.components.SelectControl,{label:q("Component","kunta_api_core"),value:this.state.component,options:n,onChange:function(t){e.setState({component:t})}}),r.a.createElement(wp.components.SelectControl,{label:q("Language","kunta_api_core"),value:this.state.lang,options:a,onChange:function(t){e.setState({lang:t})}}),r.a.createElement(p,{modalTitle:q("Search Services Locations","kunta_api_core"),inputLabel:q("Search Services Locations","kunta_api_core"),inputHelp:q("Enter some text to search service locations","kunta_api_core"),searchAction:"kunta_api_search_service_location_channels",open:this.state.isOpen,getDisplayName:function(e){var t=e.names||[];return t.sort(function(e,t){return"fi"===e.language?-1:1}),t.length?t[0].value:null},onSelect:function(t){e.setState({isOpen:!1,channelId:t.id})},onClose:function(){return e.setState({isOpen:!1})}}),r.a.createElement(_,{channelId:this.state.channelId,onChange:function(t){e.setState({serviceLocationPage:t})}}),r.a.createElement("hr",null),r.a.createElement(wp.components.ServerSideRender,{block:"kunta-api/service-location-service-channel",attributes:{channelId:this.state.channelId,lang:this.state.lang,component:this.state.component},urlQueryArgs:{preview:!0}}))},t}(r.a.Component),S=wp.i18n.__;wp.blocks.registerBlockType("kunta-api/service-location-service-channel",{title:S("Kunta API Service Location","kunta_api_core"),icon:r.a.createElement("svg",{"aria-hidden":"true",width:"0.79em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1408 1792"},r.a.createElement("path",{d:"M1344 0q26 0 45 19t19 45v1664q0 26-19 45t-45 19H64q-26 0-45-19t-19-45V64q0-26 19-45T64 0h1280zM512 288v64q0 14 9 23t23 9h64q14 0 23-9t9-23v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23zm0 256v64q0 14 9 23t23 9h64q14 0 23-9t9-23v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23zm0 256v64q0 14 9 23t23 9h64q14 0 23-9t9-23v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23zm0 256v64q0 14 9 23t23 9h64q14 0 23-9t9-23v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23zm-128 320v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm512 1280v-192q0-14-9-23t-23-9H544q-14 0-23 9t-9 23v192q0 14 9 23t23 9h320q14 0 23-9t9-23zm0-512v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 1024v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v64q0 14 9 23t23 9h64q14 0 23-9t9-23z",fill:"#626262"})),category:"layout",attributes:{channelId:{type:"string"},component:{type:"string"},lang:{type:"string"},serviceLocationPage:{type:"boolean"}},edit:function(e){return r.a.createElement(C,{component:e.attributes.component,lang:e.attributes.lang,channelId:e.attributes.channelId,serviceLocationPage:e.attributes.serviceLocationPage,onComponentChange:function(t){e.setAttributes({component:t})},onLangChange:function(t){e.setAttributes({lang:t})},onChannelIdChange:function(t){e.setAttributes({channelId:t})},onServiceLocationPageChange:function(t){e.setAttributes({serviceLocationPage:t})}})},save:function(){return null}})}]);